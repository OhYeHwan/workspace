{"ast":null,"code":"import _initializerDefineProperty from \"/Users/yh/Desktop/github/workspace/kdb_studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/yh/Desktop/github/workspace/kdb_studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/yh/Desktop/github/workspace/kdb_studio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3;\n\nimport { observable, makeObservable, action, computed, toJS } from 'mobx';\nimport generateId from '../../IDGenerator';\nlet ExStore = (_class = class ExStore {\n  constructor() {\n    _initializerDefineProperty(this, \"_target\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"_dupData\", _descriptor2, this);\n\n    this._beforeData = [{\n      parentId: 'root',\n      id: 'root'\n    }, {\n      parentId: 'root',\n      id: '1',\n      name: '1'\n    }, {\n      parentId: '1',\n      id: '2',\n      name: '2'\n    }, {\n      parentId: '1',\n      id: '3',\n      name: '3'\n    }, {\n      parentId: '1',\n      id: '4',\n      name: '4'\n    }, {\n      parentId: '2',\n      id: '5',\n      name: '5'\n    }, {\n      parentId: '2',\n      id: '6',\n      name: '6'\n    }, {\n      parentId: '1',\n      id: '10',\n      name: '10'\n    }, {\n      parentId: 'root',\n      id: '21',\n      name: '21'\n    }, {\n      parentId: '21',\n      id: '22',\n      name: '22'\n    }];\n\n    _initializerDefineProperty(this, \"_data\", _descriptor3, this);\n\n    makeObservable(this);\n  }\n\n  get target() {\n    return toJS(this._target);\n  }\n\n  funcSelected(target) {\n    this._target = target;\n  }\n\n  get dupData() {\n    return toJS(this._dupData);\n  }\n\n  funcTreeModel(arrayList, rootId) {\n    let rootNodes = [];\n\n    let traverse = function (nodes, item, index) {\n      if (nodes instanceof Array) {\n        return nodes.some(function (node) {\n          if (node.id === item.parentId) {\n            node.children = node.children || [];\n            return node.children.push(arrayList.splice(index, 1)[0]);\n          }\n\n          return traverse(node.children, item, index);\n        });\n      }\n    };\n\n    while (arrayList.length > 0) {\n      arrayList.some(function (item, index) {\n        if (item.parentId === rootId) {\n          return rootNodes.push(arrayList.splice(index, 1)[0]);\n        }\n\n        return traverse(rootNodes, item, index);\n      });\n    }\n\n    return rootNodes;\n  }\n\n  funcGet() {\n    this._dupData = [...this._beforeData];\n    this._data = this.funcTreeModel(this._dupData, 'root').filter(i => i.id !== 'root');\n  }\n\n  get data() {\n    return toJS(this._data);\n  }\n\n  funcAddRootUk() {\n    let tmp = generateId(5);\n    let object = {\n      parentId: 'root',\n      id: tmp,\n      name: tmp\n    };\n\n    this._beforeData.push(object);\n\n    this.funcGet();\n  }\n\n  funcAddChildUk() {\n    let tmp = generateId(5);\n    let object = {\n      parentId: this._target.parentId,\n      id: tmp,\n      name: tmp\n    };\n\n    this._beforeData.push(object);\n  }\n\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"_target\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return {\n      parentId: null,\n      id: null,\n      name: '',\n      children: []\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"target\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"target\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"funcSelected\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"funcSelected\"), _class.prototype), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"_dupData\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"dupData\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"dupData\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"funcTreeModel\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"funcTreeModel\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"funcGet\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"funcGet\"), _class.prototype), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"_data\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"data\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"data\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"funcAddRootUk\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"funcAddRootUk\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"funcAddChildUk\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"funcAddChildUk\"), _class.prototype)), _class);\nexport default new ExStore();","map":{"version":3,"sources":["/Users/yh/Desktop/github/workspace/kdb_studio/src/uk/store/ExStore.js"],"names":["observable","makeObservable","action","computed","toJS","generateId","ExStore","constructor","_beforeData","parentId","id","name","target","_target","funcSelected","dupData","_dupData","funcTreeModel","arrayList","rootId","rootNodes","traverse","nodes","item","index","Array","some","node","children","push","splice","length","funcGet","_data","filter","i","data","funcAddRootUk","tmp","object","funcAddChildUk"],"mappings":"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","sourcesContent":["import { observable, makeObservable, action, computed, toJS } from 'mobx';\nimport generateId from '../../IDGenerator';\n\nclass ExStore {\n  constructor() {\n    makeObservable(this);\n  }\n\n  @observable\n  _target = {\n    parentId: null,\n    id: null,\n    name: '',\n    children: [],\n  };\n\n  @computed\n  get target() {\n    return toJS(this._target);\n  }\n\n  @action\n  funcSelected(target) {\n    this._target = target;\n  }\n\n  @observable\n  _dupData = [];\n\n  @computed\n  get dupData() {\n    return toJS(this._dupData);\n  }\n\n  _beforeData = [\n    {\n      parentId: 'root',\n      id: 'root',\n    },\n    {\n      parentId: 'root',\n      id: '1',\n      name: '1',\n    },\n    {\n      parentId: '1',\n      id: '2',\n      name: '2',\n    },\n    {\n      parentId: '1',\n      id: '3',\n      name: '3',\n    },\n    {\n      parentId: '1',\n      id: '4',\n      name: '4',\n    },\n    {\n      parentId: '2',\n      id: '5',\n      name: '5',\n    },\n    {\n      parentId: '2',\n      id: '6',\n      name: '6',\n    },\n    {\n      parentId: '1',\n      id: '10',\n      name: '10',\n    },\n    {\n      parentId: 'root',\n      id: '21',\n      name: '21',\n    },\n    {\n      parentId: '21',\n      id: '22',\n      name: '22',\n    },\n  ];\n\n  @action\n  funcTreeModel(arrayList, rootId) {\n    let rootNodes = [];\n\n    let traverse = function (nodes, item, index) {\n      if (nodes instanceof Array) {\n        return nodes.some(function (node) {\n          if (node.id === item.parentId) {\n            node.children = node.children || [];\n            return node.children.push(arrayList.splice(index, 1)[0]);\n          }\n          return traverse(node.children, item, index);\n        });\n      }\n    };\n\n    while (arrayList.length > 0) {\n      arrayList.some(function (item, index) {\n        if (item.parentId === rootId) {\n          return rootNodes.push(arrayList.splice(index, 1)[0]);\n        }\n        return traverse(rootNodes, item, index);\n      });\n    }\n    return rootNodes;\n  }\n\n  @action\n  funcGet() {\n    this._dupData = [...this._beforeData];\n    this._data = this.funcTreeModel(this._dupData, 'root').filter(\n      i => i.id !== 'root',\n    );\n  }\n\n  @observable\n  _data = [];\n\n  @computed\n  get data() {\n    return toJS(this._data);\n  }\n\n  @action\n  funcAddRootUk() {\n    let tmp = generateId(5);\n    let object = {\n      parentId: 'root',\n      id: tmp,\n      name: tmp,\n    };\n    this._beforeData.push(object);\n    this.funcGet();\n  }\n\n  @action\n  funcAddChildUk() {\n    let tmp = generateId(5);\n    let object = {\n      parentId: this._target.parentId,\n      id: tmp,\n      name: tmp,\n    };\n    this._beforeData.push(object);\n  }\n}\nexport default new ExStore();\n"]},"metadata":{},"sourceType":"module"}